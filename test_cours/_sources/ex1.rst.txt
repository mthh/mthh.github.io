Exercice 1 : Prise en main
==========================

Objectif
--------

Se familiariser avec la console python et l'éditeur de code associé.

Données
-------

Les données proviennent de Natural Earth [#f1]_.

| -> ``TP/data/ex1-3/ne_10m_admin_0_countries.shp`` (Polygones - Pays du monde)

Procédure
---------

Charger les données
^^^^^^^^^^^^^^^^^^^

- Ouvrir QGIS 3.

- Ouvrir la console Python (``CTRL+ALT+P`` ou ``Extension > Console Python``)

- Charger la couche ``ne_10m_admin_0_countries.shp``.

  * soit en faisant un glissé-déposé de ce fichier vers l'interface de QGIS,
  * soit en en utilisant le menu ``Couche > Ajouter une couche > Ajouter une couche vecteur...``

.. figure:: img/0_qgis_interface.png
  :width: 100%
  :align: center
  :figwidth: 98%


Tester les actions suivantes dans la console
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

- Affichage du nombre d'enregistrements dans une couche :
  ::

    layer = iface.activeLayer()
    print(layer.featureCount())

- Afficher le nom des champs de la couche :
  ::

    for field in layer.fields():
        print(field.name(), field.typeName())


- Obtenir les modes de rendu possible dans QGIS :
  ::

    QgsRendererRegistry().renderersList()


- Lister les couches du projet et leur type :
  ::

    for layer in QgsProject.instance().mapLayers().values():
        name = layer.name()
        geom_type = QgsWkbTypes.displayString(layer.wkbType())
        print('{}: {}'.format(name, geom_type))


- Ouvrir l'éditeur (*Afficher l'éditeur*) et insérer le code suivant :
  ::

    from qgis.utils import iface
    layer = iface.activeLayer()
    name = layer.name()
    nb = layer.featureCount()
    print("La couche {} compte {} entités")


  * **Sélectionner une partie de ce bloc de code dans l'éditeur et appuyer sur** ``CTRL-E`` **pour éxécuter seulement les insctructions sélectionnées**.
  * **Enregistrer le script `nb_features.py` et l'exécuter.**



.. rubric:: Footnotes

.. [#f1] http://www.naturalearthdata.com/. Données téléchargées le 28/02/2019.
